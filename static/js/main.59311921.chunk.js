(this.webpackJsonpreversi=this.webpackJsonpreversi||[]).push([[0],{12:function(e,a,t){e.exports={userPanel:"UserPanel_userPanel__HC_aB",button:"UserPanel_button__3k1dO",middleBlock:"UserPanel_middleBlock__TP9TD",totalScoreBlock:"UserPanel_totalScoreBlock__Roy3U",enterActive:"UserPanel_enterActive__1M_Gt",enterDone:"UserPanel_enterDone__2Pw9B",actionsBlock:"UserPanel_actionsBlock__5vu2b",enter:"UserPanel_enter__24hNT",exit:"UserPanel_exit__iNW53",exitActive:"UserPanel_exitActive__RtX9S",totalScore:"UserPanel_totalScore__3fmfC",squareBlock:"UserPanel_squareBlock__1QBMJ"}},21:function(e,a,t){e.exports={wrapper:"Disk_wrapper__1qe-e",disk:"Disk_disk__ZzxAB",white:"Disk_white__21JwF",black:"Disk_black__kSe-k",front:"Disk_front__2jHMx",back:"Disk_back__1NR7I",side:"Disk_side__1RV_v",spoke:"Disk_spoke__D4k14"}},22:function(e,a,t){e.exports={helpButton:"GameRulesDialog_helpButton__3Vzlx",section:"GameRulesDialog_section__1py7b"}},27:function(e,a,t){e.exports={playerCard:"PlayerCard_playerCard__3lkue",black:"PlayerCard_black__22KkI",white:"PlayerCard_white__2WC93",enterActive:"PlayerCard_enterActive__10eT0",enterDone:"PlayerCard_enterDone__iCe1a",active:"PlayerCard_active__2Iv2-"}},28:function(e,a,t){e.exports={dialog:"Dialog_dialog__YakMC",header:"Dialog_header__33nxs",content:"Dialog_content__1H4fm",closeButton:"Dialog_closeButton__1u_Gz"}},29:function(e,a,t){e.exports={square:"Square_square__1AiCK",withMark:"Square_withMark__3oTPS",validMove:"Square_validMove__2eHfV",mayBeCaptured:"Square_mayBeCaptured__3IWs9"}},36:function(e,a,t){e.exports={boardContainer:"Board_boardContainer__3ew5_",board:"Board_board__2vvwL",totalScore:"Board_totalScore__2IAP_",black:"Board_black__3K0FP"}},41:function(e,a,t){e.exports={app:"App_app__2VzCP"}},48:function(e,a,t){e.exports={header:"Header_header__2ONRg"}},55:function(e,a,t){e.exports=t(72)},60:function(e,a,t){},63:function(e,a,t){var n={"./black-icon.jpg":64,"./robot-black-icon.png":65,"./robot-white-icon.png":66,"./white-icon.jpg":67,"./wood-bg.jpg":68};function r(e){var a=o(e);return t(a)}function o(e){if(!t.o(n,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=63},64:function(e,a,t){e.exports=t.p+"static/media/black-icon.ba59a848.jpg"},65:function(e,a,t){e.exports=t.p+"static/media/robot-black-icon.15e05fad.png"},66:function(e,a,t){e.exports=t.p+"static/media/robot-white-icon.26ab1b8c.png"},67:function(e,a,t){e.exports=t.p+"static/media/white-icon.ba010b87.jpg"},68:function(e,a,t){e.exports=t.p+"static/media/wood-bg.ac610868.jpg"},72:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(8),c=t.n(o),l=(t(60),t(41)),i=t.n(l),s=t(10),u=t(36),m=t.n(u),d=t(14),h=t(21),p=t.n(h),f=function(e){var a=[p.a.wrapper,p.a[e.color]];return r.a.createElement("div",{className:a.join(" ")},r.a.createElement("div",{className:p.a.disk},r.a.createElement("div",{className:p.a.front}),r.a.createElement("div",{className:p.a.back}),r.a.createElement("div",{className:p.a.side},Object(d.a)(Array(16)).map((function(e,a){return r.a.createElement("div",{key:a,className:p.a.spoke})})))))},b=t(11),v=t(98),_=t(27),k=t.n(_),E=function(e){return r.a.createElement(v.a,{in:e.show,timeout:300,classNames:Object(b.a)({},k.a),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("figure",{className:k.a.playerCard+" "+k.a[e.color]},r.a.createElement("div",{className:e.active?k.a.active:""}),r.a.createElement("img",{src:t(63)("./".concat(e.icon)),alt:e.color}),r.a.createElement("figcaption",null,e.nickname)))},y=t(47),w=t.n(y),g=t(94),O=t(22),C=t.n(O),N=t(2),j=t(90),B=t(92),S=t(74),T=t(97),P=t(95),x=t(46),A=t.n(x),D=t(28),M=t.n(D),R=r.a.forwardRef((function(e,a){return r.a.createElement(j.a,Object.assign({ref:a},e))})),q=function(e){var a=e.children,t=(e.classes,e.onClose),n=Object(N.a)(e,["children","classes","onClose"]);return r.a.createElement(B.a,Object.assign({disableTypography:!0,className:M.a.header},n),r.a.createElement(S.a,{variant:"h6"},a),t?r.a.createElement(g.a,{"aria-label":"close",className:M.a.closeButton,onClick:t},r.a.createElement(A.a,null)):null)},H=function(e){return r.a.createElement(T.a,{open:e.isOpen,TransitionComponent:R,className:M.a.dialog,onClose:e.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(q,{id:"customized-dialog-title",onClose:e.handleClose},e.headerText),r.a.createElement(P.a,{id:"alert-dialog-slide-description",className:M.a.content,dividers:!0},e.children))},I=function(){var e=Object(n.useState)(!1),a=Object(s.a)(e,2),t=a[0],o=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{className:C.a.helpButton,onClick:function(){o(!0)}},r.a.createElement(w.a,null)),r.a.createElement(H,{isOpen:t,headerText:"Game rules",handleClose:function(){o(!1)}},r.a.createElement("div",{className:C.a.section},r.a.createElement("h3",null,"Origin"),r.a.createElement("p",null,"Reversi is an ancient game whose origin is uncertain."),r.a.createElement("p",null,"The oldest references about similar games go back to late in the 19th century; those games had different names and their boards had different size or shape."),r.a.createElement("p",null,"In 1870 appeared a similar game using a cross shape board. Subsequently appeared another game played on a 8x8 square shape board.")),r.a.createElement("div",{className:C.a.section},r.a.createElement("h3",null,"Description"),r.a.createElement("p",null,"Two players take part in this game; they need a board with 64 squares distributed in 8 rows and 8 columns, and 64 similar pieces of two colours (normally black and white): the obverse in one colour and the reversi in the other colour.")),r.a.createElement("div",{className:C.a.section},r.a.createElement("h3",null,"Objective"),r.a.createElement("p",null,"The objective for each of the players is to finish the game with more pieces on the board in his own colour than the opponent.")),r.a.createElement("div",{className:C.a.section},r.a.createElement("h3",null,"Start of the game"),r.a.createElement("p",null,"Before starting players decide which colour will use each of them."),r.a.createElement("p",null,"Next 4 pieces have to be placed in the central squares of the board, so that each pair of pieces of the same colour form a diagonal between them."),r.a.createElement("p",null,"The player with black pieces moves first; one only move is made every turn.")),r.a.createElement("div",{className:C.a.section},r.a.createElement("h3",null,"Moves"),r.a.createElement("p",null,"A move consists in placing from outside one piece on the board. Placed pieces can never be moved to another square later in the game."),r.a.createElement("p",null,"The incorporation of the pieces must be made according to the following rules:"),r.a.createElement("ul",null,r.a.createElement("li",null,"The incorported piece must outflank one or more of the opponent placed pieces"),r.a.createElement("li",null,"To outflank means that a single piece or one straight row (vertical, horizontal or diagonal) of pieces of the opponent is in both sides next to own pieces, with no empty squares between all those pieces"),r.a.createElement("li",null,"The player who makes the move turns the outflanked pieces over, becoming all of them in own pieces"),r.a.createElement("li",null,"If there is more than one outflanked row, all the involved pieces in those rows have to be flipped"),r.a.createElement("li",null,"If it\xb4s not possible to make this kind of move, turn is forfeited and the opponent repeats another move"))),r.a.createElement("div",{className:C.a.section},r.a.createElement("h3",null,"Final"),r.a.createElement("p",null,"The game is over when all the squares of the board are taken or none of the players can move."),r.a.createElement("p",null,"In any case the winner is the player who has more pieces on the board."),r.a.createElement("p",null,"The game ends in a draw when both players have the same number of pieces on the board."))))},U={},G=[],L={},z=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=Object(n.useState)(U)[1],t=function(e,a){var t=L[e](U,a);U=Object(b.a)({},U,{},t);var n=!0,r=!1,o=void 0;try{for(var c,l=G[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){(0,c.value)(U)}}catch(i){r=!0,o=i}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}};return Object(n.useEffect)((function(){return e&&G.push(a),function(){e&&(G=G.filter((function(e){return e!==a})))}}),[a,e]),[U,t]},V=function(e,a){a&&(U=Object(b.a)({},U,{},a),L=Object(b.a)({},L,{},e))},F=function(){var e=z(),a=Object(s.a)(e,1)[0],t=a.totalScore,o=a.currentPlayer,c=a.players,l=Object(n.useState)(!1),i=Object(s.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(null),h=Object(s.a)(d,2),p=h[0],f=h[1],b=Object(n.useCallback)((function(){if(t)return t.black>t.white?"Congratulations! ".concat(c.black.nickname," wins!!"):t.black<t.white?"Congratulations! ".concat(c.white.nickname," wins!!"):"Surprise! This is a draw."}),[c,t]),v=Object(n.useCallback)((function(){m(!0),f(b())}),[b]);return Object(n.useEffect)((function(){o||v()}),[o,v]),r.a.createElement(H,{isOpen:u,headerText:"Results",handleClose:function(){m(!1)}},p)},W=t(29),J=t.n(W),Y=function(e){var a=[J.a.square];return e.isMarked&&a.push(J.a.withMark),e.isValidMove&&a.push(J.a.validMove),e.mayBeCaptured&&a.push(J.a.mayBeCaptured),r.a.createElement("div",{className:a.join(" "),onClick:e.clicked,onMouseOver:e.hover,onMouseLeave:e.blur},e.isNotEmpty&&r.a.createElement(f,{color:e.color}))},K=function(e){var a=Object(b.a)({},e);return Object.values(a).forEach((function(e){a[e.key]=Object(b.a)({},e)})),a},Q=function(e,a){var t;return!!(null===(t=e[a])||void 0===t?void 0:t.isNotEmpty)},X=function(e,a){for(var t=[],n=0;n<8;n++)for(var r=0;r<8;r++){var o=ee(r,n);if(!Q(e,o)){var c=ae(a);Z(e,o,c).length>0&&t.push(o)}}return t},Z=function(e,a,t){var n=$(e,a,t),r=[];return n.forEach((function(t){for(var n=[],o=t.key-a,c=t;c&&c.color===t.color;)n.push(Object(b.a)({},c)),c=e[c.key+o];c&&(r=[].concat(Object(d.a)(r),n))})),r},$=function(e,a,t){for(var n=[],r=-1;r<=1;r++)for(var o=-1;o<=1;o++){var c=e[a+ee(o,r)];c&&c.key!==a&&c.color===t&&n.push(Object(b.a)({},c))}return n},ee=function(e,a){return 10*e+a},ae=function(e){return"black"===e?"white":"black"},te={},ne={33:{key:33,isNotEmpty:!0,color:"white",mayBeCaptured:!1},44:{key:44,isNotEmpty:!0,color:"white",mayBeCaptured:!1},34:{key:34,isNotEmpty:!0,color:"black",mayBeCaptured:!1},43:{key:43,isNotEmpty:!0,color:"black",mayBeCaptured:!1}},re=[32,23,54,45],oe=function(){var e,a=z(),t=Object(s.a)(a,2),o=t[0],c=o.currentPlayer,l=o.gameStart,i=o.players,u=t[1],h=null===(e=i[c])||void 0===e?void 0:e.isHuman,p=Object(n.useState)(te),f=Object(s.a)(p,2),b=f[0],v=f[1],_=Object(n.useState)([]),k=Object(s.a)(_,2),E=k[0],y=k[1],w=Object(n.useCallback)((function(e,a){return a&&E.includes(e)}),[E]),g=function(e){if(w(e,h)){var a=K(b),t=ae(c),n=Z(a,e,t);0!==n.length&&(n.forEach((function(e){a[e.key].mayBeCaptured=!0})),v(a))}},O=function(){if(h){var e=Object.values(b).filter((function(e){return!0===e.mayBeCaptured}));if(0!==e.length){var a=K(b);e.forEach((function(e){a[e.key].mayBeCaptured=!1})),v(a)}}},C=Object(n.useCallback)((function(e,a){if(w(e,a)){var t=ae(c),n=K(b),r=Z(n,e,t);n[e]={key:e,isNotEmpty:!0,color:c},r.forEach((function(e){n[e.key].color=c,n[e.key].mayBeCaptured=!1}));var o=X(n,t);0===o.length&&0===(o=X(n,t=c)).length&&(t=null);var l=function(e){var a=Object.values(e),t=a.length,n=a.reduce((function(e,a){return"black"===a.color?e+1:e}),0);return{black:n,white:t-n}}(n);u("TOTAL_SCORE_CHANGED",l),u("PLAYER_CHANGED",t),v(n),y(o)}}),[c,b,u,w]);Object(n.useEffect)((function(){var e;return!1===h&&(e=setTimeout((function(){var e=ae(c),a=K(b),t=function(e,a,t){var n=[];e.forEach((function(e){var r=Z(a,e,t);n.push({key:e,captured:r.length})}));var r=Math.max.apply(Math,Object(d.a)(n.map((function(e){return e.captured}))));if((n=n.filter((function(e){return e.captured===r}))).length>0){var o=Math.floor(Math.random()*n.length);return n[o].key}return null}(E,a,e);"number"===typeof t&&C(t,!0)}),1e3)),function(){e&&clearTimeout(e)}}),[c,h,b,E,C]),Object(n.useEffect)((function(){l?(v(ne),y(re)):(v(te),y([]))}),[l]);for(var N=[],j=0;j<8;j++)for(var B=function(e){var a=ee(e,j),t=b[a];N.push(r.a.createElement(Y,{key:a,isMarked:[2,6].includes(e)&&[2,6].includes(j),isValidMove:w(a,h)?c:null,isNotEmpty:null===t||void 0===t?void 0:t.isNotEmpty,mayBeCaptured:null===t||void 0===t?void 0:t.mayBeCaptured,color:null===t||void 0===t?void 0:t.color,hover:function(){return g(a)},blur:O,clicked:function(){return C(a,h)}}))},S=0;S<8;S++)B(S);return r.a.createElement("div",{className:m.a.boardContainer},r.a.createElement("div",{className:m.a.board,"data-player":c},N))},ce=t(48),le=t.n(ce),ie=r.a.memo((function(){return r.a.createElement("header",{className:le.a.header},"Reversi",r.a.createElement(I,null))})),se=t(96),ue=t(12),me=t.n(ue),de=function(){var e=z(),a=Object(s.a)(e,2),t=a[0],n=t.players,o=t.currentPlayer,c=t.gameStart,l=t.totalScore,i=a[1],u=function(e){i("GAME_START"),i("INIT_TOTAL_SCORE"),i("PLAYER_CHANGED","black"),i("SET_ROBOTS",e)},m=r.a.createElement(v.a,{in:c,timeout:300,classNames:Object(b.a)({},me.a),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:me.a.totalScoreBlock},r.a.createElement("div",{className:me.a.totalScore},r.a.createElement("div",{className:me.a.squareBlock},r.a.createElement(Y,{isNotEmpty:!0,color:"black"}),null===l||void 0===l?void 0:l.black),r.a.createElement("div",{className:me.a.squareBlock},r.a.createElement(Y,{isNotEmpty:!0,color:"white"}),null===l||void 0===l?void 0:l.white)),r.a.createElement(se.a,{className:me.a.button,variant:"outlined",onClick:function(){i("GAME_END")}},"End game"))),d=r.a.createElement(v.a,{in:!c,timeout:300,classNames:Object(b.a)({},me.a),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:me.a.actionsBlock},r.a.createElement(se.a,{className:me.a.button,variant:"outlined",onClick:function(){return u(1)}},"Single player"),r.a.createElement(se.a,{className:me.a.button,variant:"outlined",onClick:function(){return u(0)}},"2 players"),r.a.createElement(se.a,{className:me.a.button,variant:"outlined",onClick:function(){return u(2)}},"Battle of robots")));return r.a.createElement("div",{className:me.a.userPanel},r.a.createElement(E,{show:c,color:"black",active:"black"===o,icon:n.black.icon,nickname:n.black.nickname}),r.a.createElement("div",{className:me.a.middleBlock},m,d),r.a.createElement(E,{show:c,color:"white",active:"white"===o,icon:n.white.icon,nickname:n.white.nickname}))},he=function(){return document.body.classList.add("green"),r.a.createElement("div",{className:i.a.app},r.a.createElement(ie,null),r.a.createElement(oe,null),r.a.createElement(de,null),r.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=function(e,a){return(a?"":"robot-")+e+"-icon"+(a?".jpg":".png")},fe=function(e,a,t){return 1===t?a?"Human":"Robot":a?"Player "+e:"Robot "+e},be=function(){V({PLAYER_CHANGED:function(e,a){return{currentPlayer:a}},SET_ROBOTS:function(e,a){var t=function(e){if(0===e)return[!0,!0];if(1===e){var a=Math.random()>.5?"black":"white";return["black"===a,"white"===a]}if(2===e)return[!1,!1];throw Error("Invalid number of robots!")}(a),n=Object(s.a)(t,2),r=n[0],o=n[1];return{players:{black:{color:"black",icon:pe("black",r),isHuman:r,nickname:fe(1,r,a)},white:{color:"white",icon:pe("white",o),isHuman:o,nickname:fe(2,o,a)}}}}},{currentPlayer:"black",players:{black:{color:"black",icon:"black-icon.jpg",isHuman:!0,nickname:"Human"},white:{color:"white",icon:"robot-white-icon.png",isHuman:!1,nickname:"Robot"}}})};(function(){V({GAME_START:function(){return{gameStart:!0}},GAME_END:function(){return{gameStart:!1}},INIT_TOTAL_SCORE:function(){return{totalScore:{black:2,white:2}}},TOTAL_SCORE_CHANGED:function(e,a){return{totalScore:a}}},{gameStart:!1})})(),be(),c.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[55,1,2]]]);
//# sourceMappingURL=main.59311921.chunk.js.map