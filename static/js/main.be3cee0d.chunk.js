(this.webpackJsonpreversi=this.webpackJsonpreversi||[]).push([[0],[,function(e,a,t){e.exports={userPanel:"UserPanel_userPanel__HC_aB",playerBlock:"UserPanel_playerBlock__FBiMm",black:"UserPanel_black__3GEvs",white:"UserPanel_white__bVY1N",active:"UserPanel_active__2W2UT",button:"UserPanel_button__3k1dO",totalScoreBlock:"UserPanel_totalScoreBlock__Roy3U",actionsBlock:"UserPanel_actionsBlock__5vu2b",totalScore:"UserPanel_totalScore__3fmfC",squareBlock:"UserPanel_squareBlock__1QBMJ"}},,,,,,,function(e,a,t){e.exports={wrapper:"Disk_wrapper__1qe-e",disk:"Disk_disk__ZzxAB",white:"Disk_white__21JwF",black:"Disk_black__kSe-k",front:"Disk_front__2jHMx",back:"Disk_back__1NR7I",side:"Disk_side__1RV_v",spoke:"Disk_spoke__D4k14"}},,,,,function(e,a,t){e.exports={square:"Square_square__1AiCK",withMark:"Square_withMark__3oTPS",validMove:"Square_validMove__2eHfV",mayBeCaptured:"Square_mayBeCaptured__3IWs9"}},function(e,a,t){e.exports={boardContainer:"Board_boardContainer__3ew5_",board:"Board_board__2vvwL",totalScore:"Board_totalScore__2IAP_",black:"Board_black__3K0FP"}},,function(e,a,t){var n={"./black-icon.jpg":35,"./robot-black-icon.png":36,"./robot-white-icon.png":37,"./white-icon.jpg":38,"./wood-bg.jpg":39};function r(e){var a=o(e);return t(a)}function o(e){if(!t.o(n,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=16},,,,function(e,a,t){e.exports={app:"App_app__2VzCP"}},function(e,a,t){e.exports={header:"Header_header__2ONRg"}},,,,function(e,a,t){e.exports=t(40)},,,,,function(e,a,t){},,,,,function(e,a,t){e.exports=t.p+"static/media/black-icon.ba59a848.jpg"},function(e,a,t){e.exports=t.p+"static/media/robot-black-icon.15e05fad.png"},function(e,a,t){e.exports=t.p+"static/media/robot-white-icon.26ab1b8c.png"},function(e,a,t){e.exports=t.p+"static/media/white-icon.ba010b87.jpg"},function(e,a,t){e.exports=t.p+"static/media/wood-bg.ac610868.jpg"},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),c=t.n(o),i=(t(30),t(17)),l=t(11),u=t(18),s=t(19),f=t(23),m=t(20),d=t.n(m),v=t(21),k=t.n(v),p=r.a.memo((function(){return r.a.createElement("header",{className:k.a.header},"Reversi")})),b=t(7),_=t(14),h=t.n(_),E=t(13),y=t.n(E),w=t(2),O=t(8),N=t.n(O),g=function(e){var a=[N.a.wrapper,N.a[e.color]];return r.a.createElement("div",{className:a.join(" ")},r.a.createElement("div",{className:N.a.disk},r.a.createElement("div",{className:N.a.front}),r.a.createElement("div",{className:N.a.back}),r.a.createElement("div",{className:N.a.side},Object(w.a)(Array(32)).map((function(e,a){return r.a.createElement("div",{key:a,className:N.a.spoke})})))))},j=function(e){var a=[y.a.square];return e.isMarked&&a.push(y.a.withMark),e.isValidMove&&a.push(y.a.validMove),e.mayBeCaptured&&a.push(y.a.mayBeCaptured),r.a.createElement("div",{className:a.join(" "),onClick:e.clicked,onMouseOver:e.hover,onMouseLeave:e.blur},e.isNotEmpty&&r.a.createElement(g,{color:e.color}))},B=t(3),C=function(e){var a=Object(B.a)({},e);return Object.values(a).forEach((function(e){a[e.key]=Object(B.a)({},e)})),a},S=function(e,a){var t;return!!(null===(t=e[a])||void 0===t?void 0:t.isNotEmpty)},M=function(e,a){for(var t=[],n=0;n<8;n++)for(var r=0;r<8;r++){var o=T(r,n);if(!S(e,o)){var c=R(a);P(e,o,c).length>0&&t.push(o)}}return t},P=function(e,a,t){var n=A(e,a,t),r=[];return n.forEach((function(t){for(var n=[],o=t.key-a,c=t;c&&c.color===t.color;)n.push(Object(B.a)({},c)),c=e[c.key+o];c&&(r=[].concat(Object(w.a)(r),n))})),r},A=function(e,a,t){for(var n=[],r=-1;r<=1;r++)for(var o=-1;o<=1;o++){var c=e[a+T(o,r)];c&&c.key!==a&&c.color===t&&n.push(Object(B.a)({},c))}return n},T=function(e,a){return 10*e+a},R=function(e){return"black"===e?"white":"black"},D={},x=[],H={},U=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=Object(n.useState)(D)[1],t=function(e,a){var t=H[e](D,a);D=Object(B.a)({},D,{},t);var n=!0,r=!1,o=void 0;try{for(var c,i=x[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){(0,c.value)(D)}}catch(l){r=!0,o=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}};return Object(n.useEffect)((function(){return e&&x.push(a),function(){e&&(x=x.filter((function(e){return e!==a})))}}),[a,e]),[D,t]},q=function(e,a){a&&(D=Object(B.a)({},D,{},a),H=Object(B.a)({},H,{},e))},L={},G={33:{key:33,isNotEmpty:!0,color:"white",mayBeCaptured:!1},44:{key:44,isNotEmpty:!0,color:"white",mayBeCaptured:!1},34:{key:34,isNotEmpty:!0,color:"black",mayBeCaptured:!1},43:{key:43,isNotEmpty:!0,color:"black",mayBeCaptured:!1}},I=[32,23,54,45],V=function(){var e,a=U(),t=Object(b.a)(a,2),o=t[0],c=o.currentPlayer,i=o.gameStart,l=o.players,u=t[1],s=null===(e=l[c])||void 0===e?void 0:e.isHuman,f=Object(n.useState)(G),m=Object(b.a)(f,2),d=m[0],v=m[1],k=Object(n.useState)(I),p=Object(b.a)(k,2),_=p[0],E=p[1],y=function(e){return s&&_.includes(e)},O=function(e){if(y(e)){var a=C(d),t=R(c),n=P(a,e,t);0!==n.length&&(n.forEach((function(e){a[e.key].mayBeCaptured=!0})),v(a))}},N=function(){if(s){var e=Object.values(d).filter((function(e){return!0===e.mayBeCaptured}));if(0!==e.length){var a=C(d);e.forEach((function(e){a[e.key].mayBeCaptured=!1})),v(a)}}},g=Object(n.useCallback)((function(e,a){if(a&&_.includes(e)){var t=R(c),n=C(d),r=P(n,e,t);n[e]={key:e,isNotEmpty:!0,color:c},r.forEach((function(e){n[e.key].color=c,n[e.key].mayBeCaptured=!1}));var o=M(n,t);0===o.length&&0===(o=M(n,t=c)).length&&(t=null);var i=function(e){var a=Object.values(e),t=a.length,n=a.reduce((function(e,a){return"black"===a.color?e+1:e}),0);return{black:n,white:t-n}}(n);u("TOTAL_SCORE_CHANGED",i),u("PLAYER_CHANGED",t),v(n),E(o)}}),[c,_,d,u]);Object(n.useEffect)((function(){var e;if(!1===s){var a=R(c),t=C(d),n=function(e,a,t){var n=[];e.forEach((function(e){var r=P(a,e,t);n.push({key:e,captured:r.length})}));var r=Math.max.apply(Math,Object(w.a)(n.map((function(e){return e.captured}))));if((n=n.filter((function(e){return e.captured===r}))).length>0){var o=Math.floor(Math.random()*n.length);return n[o].key}return null}(_,t,a);if("number"!==typeof n)return;e=setTimeout((function(){g(n,!0)}),1e3)}return function(){e&&clearTimeout(e)}}),[c,s,d,_,g]),Object(n.useEffect)((function(){i?(v(G),E(I)):(v(L),E([]))}),[i]);for(var B=[],S=0;S<8;S++)for(var A=function(e){var a=T(e,S),t=d[a];B.push(r.a.createElement(j,{key:a,isMarked:[2,6].includes(e)&&[2,6].includes(S),isValidMove:y(a)?c:null,isNotEmpty:null===t||void 0===t?void 0:t.isNotEmpty,mayBeCaptured:null===t||void 0===t?void 0:t.mayBeCaptured,color:null===t||void 0===t?void 0:t.color,hover:function(){return O(a)},blur:N,clicked:function(){return g(a,s)}}))},D=0;D<8;D++)A(D);return r.a.createElement("div",{className:h.a.boardContainer},r.a.createElement("div",{className:h.a.board,"data-player":c},B))},F=t(53),J=t(1),W=t.n(J),Y=function(){var e=U(),a=Object(b.a)(e,2),n=a[0],o=n.players,c=n.currentPlayer,i=n.gameStart,l=n.totalScore,u=a[1],s=function(e){u("GAME_START"),u("INIT_TOTAL_SCORE"),u("PLAYER_CHANGED","black"),u("SET_ROBOTS",e)},f=r.a.createElement("div",{className:W.a.totalScoreBlock},r.a.createElement("div",{className:W.a.totalScore},r.a.createElement("div",{className:W.a.squareBlock},r.a.createElement(j,{isNotEmpty:!0,color:"black"}),null===l||void 0===l?void 0:l.black),r.a.createElement("div",{className:W.a.squareBlock},r.a.createElement(j,{isNotEmpty:!0,color:"white"}),null===l||void 0===l?void 0:l.white)),r.a.createElement(F.a,{className:W.a.button,variant:"outlined",onClick:function(){u("GAME_END")}},"End game")),m=r.a.createElement("div",{className:W.a.actionsBlock},r.a.createElement(F.a,{className:W.a.button,variant:"outlined",onClick:function(){return s(1)}},"Single player"),r.a.createElement(F.a,{className:W.a.button,variant:"outlined",onClick:function(){return s(0)}},"2 players"),r.a.createElement(F.a,{className:W.a.button,variant:"outlined",onClick:function(){return s(2)}},"Battle of robots")),d=r.a.createElement("figure",{className:[W.a.playerBlock,W.a.black,"black"===c?W.a.active:""].join(" ")},r.a.createElement("img",{src:t(16)("./".concat(o.black.icon)),alt:"black"}),r.a.createElement("figcaption",null,o.black.nickname)),v=r.a.createElement("figure",{className:[W.a.playerBlock,W.a.white,"white"===c?W.a.active:""].join(" ")},r.a.createElement("img",{src:t(16)("./".concat(o.white.icon)),alt:"white"}),r.a.createElement("figcaption",null,o.white.nickname));return r.a.createElement("div",{className:W.a.userPanel},i&&d,i?f:m,i&&v)},z=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(s.a)(a).apply(this,arguments))}return Object(f.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return document.body.classList.add("green"),r.a.createElement("div",{className:d.a.app},r.a.createElement(p,null),r.a.createElement(V,null),r.a.createElement(Y,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=function(e,a){return(a?"":"robot-")+e+"-icon"+(a?".jpg":".png")},Q=function(e,a,t){return 1===t?a?"Human":"Robot":a?"Player "+e:"Robot "+e},Z=function(){q({PLAYER_CHANGED:function(e,a){return{currentPlayer:a}},SET_ROBOTS:function(e,a){var t=function(e){if(0===e)return[!0,!0];if(1===e){var a=Math.random()>.5?"black":"white";return["black"===a,"white"===a]}if(2===e)return[!1,!1];throw Error("Invalid number of robots!")}(a),n=Object(b.a)(t,2),r=n[0],o=n[1];return{players:{black:{color:"black",icon:K("black",r),isHuman:r,nickname:Q(1,r,a)},white:{color:"white",icon:K("white",o),isHuman:o,nickname:Q(2,o,a)}}}}},{currentPlayer:"black",players:{black:{color:"black",icon:"black-icon.jpg",isHuman:!0,nickname:"Human"},white:{color:"white",icon:"robot-white-icon.png",isHuman:!1,nickname:"Robot"}}})};(function(){q({GAME_START:function(){return{gameStart:!0}},GAME_END:function(){return{gameStart:!1}},INIT_TOTAL_SCORE:function(){return{totalScore:{black:2,white:2}}},TOTAL_SCORE_CHANGED:function(e,a){return{totalScore:a}}},{gameStart:!1})})(),Z(),c.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[25,1,2]]]);
//# sourceMappingURL=main.be3cee0d.chunk.js.map