(this.webpackJsonpreversi=this.webpackJsonpreversi||[]).push([[0],[,,,function(e,t,a){e.exports={userPanel:"UserPanel_userPanel__HC_aB",button:"UserPanel_button__3k1dO",middleBlock:"UserPanel_middleBlock__TP9TD",totalScoreBlock:"UserPanel_totalScoreBlock__Roy3U",enterActive:"UserPanel_enterActive__1M_Gt",enterDone:"UserPanel_enterDone__2Pw9B",actionsBlock:"UserPanel_actionsBlock__5vu2b",showToTop:"UserPanel_showToTop__Mr6ez",exitActive:"UserPanel_exitActive__RtX9S",hideToBottom:"UserPanel_hideToBottom__2vY3U",totalScore:"UserPanel_totalScore__3fmfC",squareBlock:"UserPanel_squareBlock__1QBMJ"}},,,,,,,,,function(e,t,a){e.exports={wrapper:"Disk_wrapper__1qe-e",disk:"Disk_disk__ZzxAB",white:"Disk_white__21JwF",black:"Disk_black__kSe-k",front:"Disk_front__2jHMx",back:"Disk_back__1NR7I",side:"Disk_side__1RV_v",spoke:"Disk_spoke__D4k14"}},,,,,function(e,t,a){e.exports={square:"Square_square__1AiCK",withMark:"Square_withMark__3oTPS",validMove:"Square_validMove__2eHfV",mayBeCaptured:"Square_mayBeCaptured__3IWs9"}},function(e,t,a){e.exports={playerCard:"PlayerCard_playerCard__3lkue",black:"PlayerCard_black__22KkI",white:"PlayerCard_white__2WC93",enterActive:"PlayerCard_enterActive__10eT0",enterDone:"PlayerCard_enterDone__iCe1a",active:"PlayerCard_active__2Iv2-"}},function(e,t,a){e.exports={boardContainer:"Board_boardContainer__3ew5_",board:"Board_board__2vvwL",totalScore:"Board_totalScore__2IAP_",black:"Board_black__3K0FP"}},,,,,,function(e,t,a){e.exports={app:"App_app__2VzCP"}},function(e,t,a){e.exports={header:"Header_header__2ONRg"}},,,,,function(e,t,a){e.exports=a(47)},,,,,function(e,t,a){},,,function(e,t,a){var n={"./black-icon.jpg":40,"./robot-black-icon.png":41,"./robot-white-icon.png":42,"./white-icon.jpg":43,"./wood-bg.jpg":44};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=39},function(e,t,a){e.exports=a.p+"static/media/black-icon.ba59a848.jpg"},function(e,t,a){e.exports=a.p+"static/media/robot-black-icon.15e05fad.png"},function(e,t,a){e.exports=a.p+"static/media/robot-white-icon.26ab1b8c.png"},function(e,t,a){e.exports=a.p+"static/media/white-icon.ba010b87.jpg"},function(e,t,a){e.exports=a.p+"static/media/wood-bg.ac610868.jpg"},,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=(a(36),a(22)),l=a(15),u=a(23),s=a(24),m=a(28),d=a(25),f=a.n(d),_=a(26),v=a.n(_),k=r.a.memo((function(){return r.a.createElement("header",{className:v.a.header},"Reversi")})),p=a(11),b=a(19),E=a.n(b),h=a(17),y=a.n(h),O=a(6),w=a(12),N=a.n(w),C=function(e){var t=[N.a.wrapper,N.a[e.color]];return r.a.createElement("div",{className:t.join(" ")},r.a.createElement("div",{className:N.a.disk},r.a.createElement("div",{className:N.a.front}),r.a.createElement("div",{className:N.a.back}),r.a.createElement("div",{className:N.a.side},Object(O.a)(Array(32)).map((function(e,t){return r.a.createElement("div",{key:t,className:N.a.spoke})})))))},j=function(e){var t=[y.a.square];return e.isMarked&&t.push(y.a.withMark),e.isValidMove&&t.push(y.a.validMove),e.mayBeCaptured&&t.push(y.a.mayBeCaptured),r.a.createElement("div",{className:t.join(" "),onClick:e.clicked,onMouseOver:e.hover,onMouseLeave:e.blur},e.isNotEmpty&&r.a.createElement(C,{color:e.color}))},g=a(2),B=function(e){var t=Object(g.a)({},e);return Object.values(t).forEach((function(e){t[e.key]=Object(g.a)({},e)})),t},S=function(e,t){var a;return!!(null===(a=e[t])||void 0===a?void 0:a.isNotEmpty)},P=function(e,t){for(var a=[],n=0;n<8;n++)for(var r=0;r<8;r++){var o=M(r,n);if(!S(e,o)){var c=x(t);T(e,o,c).length>0&&a.push(o)}}return a},T=function(e,t,a){var n=A(e,t,a),r=[];return n.forEach((function(a){for(var n=[],o=a.key-t,c=a;c&&c.color===a.color;)n.push(Object(g.a)({},c)),c=e[c.key+o];c&&(r=[].concat(Object(O.a)(r),n))})),r},A=function(e,t,a){for(var n=[],r=-1;r<=1;r++)for(var o=-1;o<=1;o++){var c=e[t+M(o,r)];c&&c.key!==t&&c.color===a&&n.push(Object(g.a)({},c))}return n},M=function(e,t){return 10*e+t},x=function(e){return"black"===e?"white":"black"},D={},R=[],H={},U=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(n.useState)(D)[1],a=function(e,t){var a=H[e](D,t);D=Object(g.a)({},D,{},a);var n=!0,r=!1,o=void 0;try{for(var c,i=R[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){(0,c.value)(D)}}catch(l){r=!0,o=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}};return Object(n.useEffect)((function(){return e&&R.push(t),function(){e&&(R=R.filter((function(e){return e!==t})))}}),[t,e]),[D,a]},q=function(e,t){t&&(D=Object(g.a)({},D,{},t),H=Object(g.a)({},H,{},e))},I={},L={33:{key:33,isNotEmpty:!0,color:"white",mayBeCaptured:!1},44:{key:44,isNotEmpty:!0,color:"white",mayBeCaptured:!1},34:{key:34,isNotEmpty:!0,color:"black",mayBeCaptured:!1},43:{key:43,isNotEmpty:!0,color:"black",mayBeCaptured:!1}},G=[32,23,54,45],V=function(){var e,t=U(),a=Object(p.a)(t,2),o=a[0],c=o.currentPlayer,i=o.gameStart,l=o.players,u=a[1],s=null===(e=l[c])||void 0===e?void 0:e.isHuman,m=Object(n.useState)(L),d=Object(p.a)(m,2),f=d[0],_=d[1],v=Object(n.useState)(G),k=Object(p.a)(v,2),b=k[0],h=k[1],y=function(e){return s&&b.includes(e)},w=function(e){if(y(e)){var t=B(f),a=x(c),n=T(t,e,a);0!==n.length&&(n.forEach((function(e){t[e.key].mayBeCaptured=!0})),_(t))}},N=function(){if(s){var e=Object.values(f).filter((function(e){return!0===e.mayBeCaptured}));if(0!==e.length){var t=B(f);e.forEach((function(e){t[e.key].mayBeCaptured=!1})),_(t)}}},C=Object(n.useCallback)((function(e,t){if(t&&b.includes(e)){var a=x(c),n=B(f),r=T(n,e,a);n[e]={key:e,isNotEmpty:!0,color:c},r.forEach((function(e){n[e.key].color=c,n[e.key].mayBeCaptured=!1}));var o=P(n,a);0===o.length&&0===(o=P(n,a=c)).length&&(a=null);var i=function(e){var t=Object.values(e),a=t.length,n=t.reduce((function(e,t){return"black"===t.color?e+1:e}),0);return{black:n,white:a-n}}(n);u("TOTAL_SCORE_CHANGED",i),u("PLAYER_CHANGED",a),_(n),h(o)}}),[c,b,f,u]);Object(n.useEffect)((function(){var e;if(!1===s){var t=x(c),a=B(f),n=function(e,t,a){var n=[];e.forEach((function(e){var r=T(t,e,a);n.push({key:e,captured:r.length})}));var r=Math.max.apply(Math,Object(O.a)(n.map((function(e){return e.captured}))));if((n=n.filter((function(e){return e.captured===r}))).length>0){var o=Math.floor(Math.random()*n.length);return n[o].key}return null}(b,a,t);if("number"!==typeof n)return;e=setTimeout((function(){C(n,!0)}),1e3)}return function(){e&&clearTimeout(e)}}),[c,s,f,b,C]),Object(n.useEffect)((function(){i?(_(L),h(G)):(_(I),h([]))}),[i]);for(var g=[],S=0;S<8;S++)for(var A=function(e){var t=M(e,S),a=f[t];g.push(r.a.createElement(j,{key:t,isMarked:[2,6].includes(e)&&[2,6].includes(S),isValidMove:y(t)?c:null,isNotEmpty:null===a||void 0===a?void 0:a.isNotEmpty,mayBeCaptured:null===a||void 0===a?void 0:a.mayBeCaptured,color:null===a||void 0===a?void 0:a.color,hover:function(){return w(t)},blur:N,clicked:function(){return C(t,s)}}))},D=0;D<8;D++)A(D);return r.a.createElement("div",{className:E.a.boardContainer},r.a.createElement("div",{className:E.a.board,"data-player":c},g))},J=a(59),W=a(60),Y=a(3),z=a.n(Y),F=a(18),K=a.n(F),Q=function(e){return r.a.createElement(W.a,{in:e.show,timeout:300,classNames:Object(g.a)({},K.a),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("figure",{className:K.a.playerCard+" "+K.a[e.color]},r.a.createElement("div",{className:e.active?K.a.active:""}),r.a.createElement("img",{src:a(39)("./".concat(e.icon)),alt:e.color}),r.a.createElement("figcaption",null,e.nickname)))},X=function(){var e=U(),t=Object(p.a)(e,2),a=t[0],n=a.players,o=a.currentPlayer,c=a.gameStart,i=a.totalScore,l=t[1],u=function(e){l("GAME_START"),l("INIT_TOTAL_SCORE"),l("PLAYER_CHANGED","black"),l("SET_ROBOTS",e)},s=r.a.createElement(W.a,{in:c,timeout:300,classNames:Object(g.a)({},z.a),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:z.a.totalScoreBlock},r.a.createElement("div",{className:z.a.totalScore},r.a.createElement("div",{className:z.a.squareBlock},r.a.createElement(j,{isNotEmpty:!0,color:"black"}),null===i||void 0===i?void 0:i.black),r.a.createElement("div",{className:z.a.squareBlock},r.a.createElement(j,{isNotEmpty:!0,color:"white"}),null===i||void 0===i?void 0:i.white)),r.a.createElement(J.a,{className:z.a.button,variant:"outlined",onClick:function(){l("GAME_END")}},"End game"))),m=r.a.createElement(W.a,{in:!c,timeout:300,classNames:Object(g.a)({},z.a),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:z.a.actionsBlock},r.a.createElement(J.a,{className:z.a.button,variant:"outlined",onClick:function(){return u(1)}},"Single player"),r.a.createElement(J.a,{className:z.a.button,variant:"outlined",onClick:function(){return u(0)}},"2 players"),r.a.createElement(J.a,{className:z.a.button,variant:"outlined",onClick:function(){return u(2)}},"Battle of robots")));return r.a.createElement("div",{className:z.a.userPanel},r.a.createElement(Q,{show:c,color:"black",active:"black"===o,icon:n.black.icon,nickname:n.black.nickname}),r.a.createElement("div",{className:z.a.middleBlock},s,m),r.a.createElement(Q,{show:c,color:"white",active:"white"===o,icon:n.white.icon,nickname:n.white.nickname}))},Z=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return document.body.classList.add("green"),r.a.createElement("div",{className:f.a.app},r.a.createElement(k,null),r.a.createElement(V,null),r.a.createElement(X,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=function(e,t){return(t?"":"robot-")+e+"-icon"+(t?".jpg":".png")},ee=function(e,t,a){return 1===a?t?"Human":"Robot":t?"Player "+e:"Robot "+e},te=function(){q({PLAYER_CHANGED:function(e,t){return{currentPlayer:t}},SET_ROBOTS:function(e,t){var a=function(e){if(0===e)return[!0,!0];if(1===e){var t=Math.random()>.5?"black":"white";return["black"===t,"white"===t]}if(2===e)return[!1,!1];throw Error("Invalid number of robots!")}(t),n=Object(p.a)(a,2),r=n[0],o=n[1];return{players:{black:{color:"black",icon:$("black",r),isHuman:r,nickname:ee(1,r,t)},white:{color:"white",icon:$("white",o),isHuman:o,nickname:ee(2,o,t)}}}}},{currentPlayer:"black",players:{black:{color:"black",icon:"black-icon.jpg",isHuman:!0,nickname:"Human"},white:{color:"white",icon:"robot-white-icon.png",isHuman:!1,nickname:"Robot"}}})};(function(){q({GAME_START:function(){return{gameStart:!0}},GAME_END:function(){return{gameStart:!1}},INIT_TOTAL_SCORE:function(){return{totalScore:{black:2,white:2}}},TOTAL_SCORE_CHANGED:function(e,t){return{totalScore:t}}},{gameStart:!1})})(),te(),c.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[31,1,2]]]);
//# sourceMappingURL=main.7310458a.chunk.js.map