(this.webpackJsonpreverse=this.webpackJsonpreverse||[]).push([[0],[,function(e,a,t){e.exports={userPanel:"UserPanel_userPanel__HC_aB",playerBlock:"UserPanel_playerBlock__FBiMm",black:"UserPanel_black__3GEvs",white:"UserPanel_white__bVY1N",active:"UserPanel_active__2W2UT",totalScoreBlock:"UserPanel_totalScoreBlock__Roy3U",actionsBlock:"UserPanel_actionsBlock__5vu2b",button:"UserPanel_button__3k1dO",totalScore:"UserPanel_totalScore__3fmfC",squareBlock:"UserPanel_squareBlock__1QBMJ"}},,,,,,,function(e,a,t){e.exports={wrapper:"Disk_wrapper__1qe-e",disk:"Disk_disk__ZzxAB",white:"Disk_white__21JwF",black:"Disk_black__kSe-k",front:"Disk_front__2jHMx",back:"Disk_back__1NR7I",side:"Disk_side__1RV_v",spoke:"Disk_spoke__D4k14"}},,,,,function(e,a,t){e.exports={square:"Square_square__1AiCK",withMark:"Square_withMark__3oTPS",validMove:"Square_validMove__2eHfV",mayBeCaptured:"Square_mayBeCaptured__3IWs9"}},function(e,a,t){e.exports={boardContainer:"Board_boardContainer__3ew5_",board:"Board_board__2vvwL",totalScore:"Board_totalScore__2IAP_",black:"Board_black__3K0FP"}},,function(e,a,t){var n={"./black-icon.jpg":35,"./robot-black-icon.png":36,"./robot-white-icon.png":37,"./white-icon.jpg":38,"./wood-bg.jpg":39};function r(e){var a=o(e);return t(a)}function o(e){if(!t.o(n,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=16},,,,function(e,a,t){e.exports={header:"Header_header__2ONRg"}},,,,function(e,a,t){e.exports=t(40)},,,,,function(e,a,t){},function(e,a,t){},,,,,function(e,a,t){e.exports=t.p+"static/media/black-icon.ba59a848.jpg"},function(e,a,t){e.exports=t.p+"static/media/robot-black-icon.15e05fad.png"},function(e,a,t){e.exports=t.p+"static/media/robot-white-icon.26ab1b8c.png"},function(e,a,t){e.exports=t.p+"static/media/white-icon.ba010b87.jpg"},function(e,a,t){e.exports=t.p+"static/media/wood-bg.ac610868.jpg"},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),c=t.n(o),i=(t(29),t(17)),l=t(11),u=t(18),s=t(19),m=t(22),f=(t(30),t(20)),d=t.n(f),v=r.a.memo((function(){return r.a.createElement("header",{className:d.a.header},"Reversi")})),k=t(7),b=t(14),p=t.n(b),_=t(13),h=t.n(_),E=t(2),y=t(8),w=t.n(y),g=function(e){var a=[w.a.wrapper,w.a[e.color]];return r.a.createElement("div",{className:a.join(" ")},r.a.createElement("div",{className:w.a.disk},r.a.createElement("div",{className:w.a.front}),r.a.createElement("div",{className:w.a.back}),r.a.createElement("div",{className:w.a.side},Object(E.a)(Array(32)).map((function(e,a){return r.a.createElement("div",{key:a,className:w.a.spoke})})))))},O=function(e){var a=[h.a.square];return e.isMarked&&a.push(h.a.withMark),e.isValidMove&&a.push(h.a.validMove),e.mayBeCaptured&&a.push(h.a.mayBeCaptured),r.a.createElement("div",{className:a.join(" "),onClick:e.clicked,onMouseOver:e.hover,onMouseLeave:e.blur},e.isNotEmpty&&r.a.createElement(g,{color:e.color}))},N=t(3),j=function(e){var a=Object(N.a)({},e);return Object.values(a).forEach((function(e){a[e.key]=Object(N.a)({},e)})),a},B=function(e,a){var t;return!!(null===(t=e[a])||void 0===t?void 0:t.isNotEmpty)},C=function(e,a){for(var t=[],n=0;n<8;n++)for(var r=0;r<8;r++){var o=A(r,n);if(!B(e,o)){var c=P(a);S(e,o,c).length>0&&t.push(o)}}return t},S=function(e,a,t){var n=M(e,a,t),r=[];return n.forEach((function(t){for(var n=[],o=t.key-a,c=t;c&&c.color===t.color;)n.push(Object(N.a)({},c)),c=e[c.key+o];c&&(r=[].concat(Object(E.a)(r),n))})),r},M=function(e,a,t){for(var n=[],r=-1;r<=1;r++)for(var o=-1;o<=1;o++){var c=e[a+A(o,r)];c&&c.key!==a&&c.color===t&&n.push(Object(N.a)({},c))}return n},A=function(e,a){return 10*e+a},P=function(e){return"black"===e?"white":"black"},T={},R=[],D={},x=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=Object(n.useState)(T)[1],t=function(e,a){var t=D[e](T,a);T=Object(N.a)({},T,{},t);var n=!0,r=!1,o=void 0;try{for(var c,i=R[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){(0,c.value)(T)}}catch(l){r=!0,o=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}};return Object(n.useEffect)((function(){return e&&R.push(a),function(){e&&(R=R.filter((function(e){return e!==a})))}}),[a,e]),[T,t]},H=function(e,a){a&&(T=Object(N.a)({},T,{},a),D=Object(N.a)({},D,{},e))},U={},q={33:{key:33,isNotEmpty:!0,color:"white",mayBeCaptured:!1},44:{key:44,isNotEmpty:!0,color:"white",mayBeCaptured:!1},34:{key:34,isNotEmpty:!0,color:"black",mayBeCaptured:!1},43:{key:43,isNotEmpty:!0,color:"black",mayBeCaptured:!1}},I=[32,23,54,45],L=function(){var e,a=x(),t=Object(k.a)(a,2),o=t[0],c=o.currentPlayer,i=o.gameStart,l=o.players,u=t[1],s=null===(e=l[c])||void 0===e?void 0:e.isHuman,m=Object(n.useState)(q),f=Object(k.a)(m,2),d=f[0],v=f[1],b=Object(n.useState)(I),_=Object(k.a)(b,2),h=_[0],y=_[1],w=function(e){return s&&h.includes(e)},g=function(e){if(w(e)){var a=j(d),t=P(c),n=S(a,e,t);0!==n.length&&(n.forEach((function(e){a[e.key].mayBeCaptured=!0})),v(a))}},N=function(){if(s){var e=Object.values(d).filter((function(e){return!0===e.mayBeCaptured}));if(0!==e.length){var a=j(d);e.forEach((function(e){a[e.key].mayBeCaptured=!1})),v(a)}}},B=Object(n.useCallback)((function(e,a){if(a&&h.includes(e)){var t=P(c),n=j(d),r=S(n,e,t);n[e]={key:e,isNotEmpty:!0,color:c},r.forEach((function(e){n[e.key].color=c,n[e.key].mayBeCaptured=!1}));var o=C(n,t);0===o.length&&0===(o=C(n,t=c)).length&&(t=null);var i=function(e){var a=Object.values(e),t=a.length,n=a.reduce((function(e,a){return"black"===a.color?e+1:e}),0);return{black:n,white:t-n}}(n);u("TOTAL_SCORE_CHANGED",i),u("PLAYER_CHANGED",t),v(n),y(o)}}),[c,h,d,u]);Object(n.useEffect)((function(){var e;if(!1===s){var a=P(c),t=j(d),n=function(e,a,t){var n=[];e.forEach((function(e){var r=S(a,e,t);n.push({key:e,captured:r.length})}));var r=Math.max.apply(Math,Object(E.a)(n.map((function(e){return e.captured}))));if((n=n.filter((function(e){return e.captured===r}))).length>0){var o=Math.floor(Math.random()*n.length);return n[o].key}return null}(h,t,a);if("number"!==typeof n)return;e=setTimeout((function(){B(n,!0)}),1e3)}return function(){e&&clearTimeout(e)}}),[c,s,d,h,B]),Object(n.useEffect)((function(){i?(v(q),y(I)):(v(U),y([]))}),[i]);for(var M=[],T=0;T<8;T++)for(var R=function(e){var a=A(e,T),t=d[a];M.push(r.a.createElement(O,{key:a,isMarked:[2,6].includes(e)&&[2,6].includes(T),isValidMove:w(a)?c:null,isNotEmpty:null===t||void 0===t?void 0:t.isNotEmpty,mayBeCaptured:null===t||void 0===t?void 0:t.mayBeCaptured,color:null===t||void 0===t?void 0:t.color,hover:function(){return g(a)},blur:N,clicked:function(){return B(a,s)}}))},D=0;D<8;D++)R(D);return r.a.createElement("div",{className:p.a.boardContainer},r.a.createElement("div",{className:p.a.board,"data-player":c},M))},G=t(53),F=t(1),V=t.n(F),J=function(){var e=x(),a=Object(k.a)(e,2),n=a[0],o=n.players,c=n.currentPlayer,i=n.gameStart,l=n.totalScore,u=a[1],s=function(e){u("GAME_START"),u("INIT_TOTAL_SCORE"),u("PLAYER_CHANGED","black"),u("SET_ROBOTS",e)},m=r.a.createElement("div",{className:V.a.totalScoreBlock},r.a.createElement("div",{className:V.a.totalScore},r.a.createElement("div",{className:V.a.squareBlock},r.a.createElement(O,{isNotEmpty:!0,color:"black"}),null===l||void 0===l?void 0:l.black),r.a.createElement("div",{className:V.a.squareBlock},r.a.createElement(O,{isNotEmpty:!0,color:"white"}),null===l||void 0===l?void 0:l.white)),r.a.createElement(G.a,{className:V.a.button,variant:"outlined",onClick:function(){u("GAME_END")}},"End game")),f=r.a.createElement("div",{className:V.a.actionsBlock},r.a.createElement(G.a,{className:V.a.button,variant:"outlined",onClick:function(){return s(1)}},"Single player"),r.a.createElement(G.a,{className:V.a.button,variant:"outlined",onClick:function(){return s(0)}},"2 players"),r.a.createElement(G.a,{className:V.a.button,variant:"outlined",onClick:function(){return s(2)}},"Battle of robots")),d=r.a.createElement("figure",{className:[V.a.playerBlock,V.a.black,"black"===c?V.a.active:""].join(" ")},r.a.createElement("img",{src:t(16)("./".concat(o.black.icon)),alt:"black"}),r.a.createElement("figcaption",null,o.black.nickname)),v=r.a.createElement("figure",{className:[V.a.playerBlock,V.a.white,"white"===c?V.a.active:""].join(" ")},r.a.createElement("img",{src:t(16)("./".concat(o.white.icon)),alt:"white"}),r.a.createElement("figcaption",null,o.white.nickname));return r.a.createElement("div",{className:V.a.userPanel},i&&d,i?m:f,i&&v)},W=["green"],Y=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(r)))).getRandomItemFromArray=function(e){return e[Math.floor(Math.random()*e.length)]},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return document.body.classList.add(this.getRandomItemFromArray(W)),r.a.createElement("div",{className:"app"},r.a.createElement(v,null),r.a.createElement(L,null),r.a.createElement(J,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=function(e,a){return(a?"":"robot-")+e+"-icon"+(a?".jpg":".png")},z=function(e,a,t){return 1===t?a?"Human":"Robot":a?"Player "+e:"Robot "+e},Q=function(){H({PLAYER_CHANGED:function(e,a){return{currentPlayer:a}},SET_ROBOTS:function(e,a){var t=function(e){if(0===e)return[!0,!0];if(1===e){var a=Math.random()>.5?"black":"white";return["black"===a,"white"===a]}if(2===e)return[!1,!1];throw Error("Invalid number of robots!")}(a),n=Object(k.a)(t,2),r=n[0],o=n[1];return{players:{black:{color:"black",icon:K("black",r),isHuman:r,nickname:z(1,r,a)},white:{color:"white",icon:K("white",o),isHuman:o,nickname:z(2,o,a)}}}}},{currentPlayer:"black",players:{black:{color:"black",icon:"black-icon.jpg",isHuman:!0,nickname:"Human"},white:{color:"white",icon:"robot-white-icon.png",isHuman:!1,nickname:"Robot"}}})};(function(){H({GAME_START:function(){return{gameStart:!0}},GAME_END:function(){return{gameStart:!1}},INIT_TOTAL_SCORE:function(){return{totalScore:{black:2,white:2}}},TOTAL_SCORE_CHANGED:function(e,a){return{totalScore:a}}},{gameStart:!1})})(),Q(),c.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[24,1,2]]]);
//# sourceMappingURL=main.404c18c0.chunk.js.map