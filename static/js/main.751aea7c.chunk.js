(this.webpackJsonpreversi=this.webpackJsonpreversi||[]).push([[0],{11:function(e,a,t){e.exports={userPanel:"UserPanel_userPanel__HC_aB",button:"UserPanel_button__3k1dO",middleBlock:"UserPanel_middleBlock__TP9TD",totalScoreBlock:"UserPanel_totalScoreBlock__Roy3U",enterActive:"UserPanel_enterActive__1M_Gt",enterDone:"UserPanel_enterDone__2Pw9B",actionsBlock:"UserPanel_actionsBlock__5vu2b",enter:"UserPanel_enter__24hNT",exit:"UserPanel_exit__iNW53",exitActive:"UserPanel_exitActive__RtX9S",totalScore:"UserPanel_totalScore__3fmfC",squareBlock:"UserPanel_squareBlock__1QBMJ"}},21:function(e,a,t){e.exports={wrapper:"Disk_wrapper__1qe-e",disk:"Disk_disk__ZzxAB",white:"Disk_white__21JwF",black:"Disk_black__kSe-k",front:"Disk_front__2jHMx",back:"Disk_back__1NR7I",side:"Disk_side__1RV_v",spoke:"Disk_spoke__D4k14"}},26:function(e,a,t){e.exports={playerCard:"PlayerCard_playerCard__3lkue",black:"PlayerCard_black__22KkI",white:"PlayerCard_white__2WC93",enterActive:"PlayerCard_enterActive__10eT0",enterDone:"PlayerCard_enterDone__iCe1a",active:"PlayerCard_active__2Iv2-"}},27:function(e,a,t){e.exports={dialog:"Dialog_dialog__YakMC",header:"Dialog_header__33nxs",content:"Dialog_content__1H4fm",closeButton:"Dialog_closeButton__1u_Gz"}},28:function(e,a,t){e.exports={square:"Square_square__1AiCK",withMark:"Square_withMark__3oTPS",validMove:"Square_validMove__2eHfV",mayBeCaptured:"Square_mayBeCaptured__3IWs9"}},34:function(e,a,t){e.exports={boardContainer:"Board_boardContainer__3ew5_",board:"Board_board__2vvwL",totalScore:"Board_totalScore__2IAP_",black:"Board_black__3K0FP"}},38:function(e,a,t){e.exports={app:"App_app__2VzCP"}},44:function(e,a,t){e.exports={header:"Header_header__2ONRg"}},53:function(e,a,t){e.exports=t(71)},58:function(e,a,t){},61:function(e,a,t){var n={"./black-icon.jpg":62,"./robot-black-icon.png":63,"./robot-white-icon.png":64,"./white-icon.jpg":65,"./wood-bg.jpg":66};function r(e){var a=o(e);return t(a)}function o(e){if(!t.o(n,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=61},62:function(e,a,t){e.exports=t.p+"static/media/black-icon.ba59a848.jpg"},63:function(e,a,t){e.exports=t.p+"static/media/robot-black-icon.15e05fad.png"},64:function(e,a,t){e.exports=t.p+"static/media/robot-white-icon.26ab1b8c.png"},65:function(e,a,t){e.exports=t.p+"static/media/white-icon.ba010b87.jpg"},66:function(e,a,t){e.exports=t.p+"static/media/wood-bg.ac610868.jpg"},71:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(7),c=t.n(o),i=(t(58),t(38)),l=t.n(i),u=t(15),s=t(34),m=t.n(s),d=t(14),f=t(21),_=t.n(f),b=function(e){var a=[_.a.wrapper,_.a[e.color]];return r.a.createElement("div",{className:a.join(" ")},r.a.createElement("div",{className:_.a.disk},r.a.createElement("div",{className:_.a.front}),r.a.createElement("div",{className:_.a.back}),r.a.createElement("div",{className:_.a.side},Object(d.a)(Array(32)).map((function(e,a){return r.a.createElement("div",{key:a,className:_.a.spoke})})))))},v=t(10),k=t(96),p=t(26),E=t.n(p),h=function(e){return r.a.createElement(k.a,{in:e.show,timeout:300,classNames:Object(v.a)({},E.a),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("figure",{className:E.a.playerCard+" "+E.a[e.color]},r.a.createElement("div",{className:e.active?E.a.active:""}),r.a.createElement("img",{src:t(61)("./".concat(e.icon)),alt:e.color}),r.a.createElement("figcaption",null,e.nickname)))},y=t(2),O=t(97),C=t(89),w=t(46),g=t(91),N=t(95),j=t(92),B=t(93),S=t(43),P=t.n(S),T=t(27),x=t.n(T),A=r.a.forwardRef((function(e,a){return r.a.createElement(O.a,Object.assign({direction:"up",ref:a},e))})),D=function(e){var a=e.children,t=(e.classes,e.onClose),n=Object(y.a)(e,["children","classes","onClose"]);return r.a.createElement(C.a,Object.assign({disableTypography:!0,className:x.a.header},n),r.a.createElement(w.a,{variant:"h6"},a),t?r.a.createElement(g.a,{"aria-label":"close",className:x.a.closeButton,onClick:t},r.a.createElement(P.a,null)):null)},M=function(e){return r.a.createElement(N.a,{open:e.isOpen,TransitionComponent:A,className:x.a.dialog,onClose:e.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(D,{id:"customized-dialog-title",onClose:e.handleClose},e.headerText),r.a.createElement(j.a,{className:x.a.content,dividers:!0},r.a.createElement(B.a,{id:"alert-dialog-slide-description"},e.children)))},R={},H=[],U={},q=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=Object(n.useState)(R)[1],t=function(e,a){var t=U[e](R,a);R=Object(v.a)({},R,{},t);var n=!0,r=!1,o=void 0;try{for(var c,i=H[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){(0,c.value)(R)}}catch(l){r=!0,o=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}};return Object(n.useEffect)((function(){return e&&H.push(a),function(){e&&(H=H.filter((function(e){return e!==a})))}}),[a,e]),[R,t]},G=function(e,a){a&&(R=Object(v.a)({},R,{},a),U=Object(v.a)({},U,{},e))},I=function(){var e=q(),a=Object(u.a)(e,1)[0],t=a.totalScore,o=a.currentPlayer,c=a.players,i=Object(n.useState)(!1),l=Object(u.a)(i,2),s=l[0],m=l[1],d=Object(n.useState)(null),f=Object(u.a)(d,2),_=f[0],b=f[1],v=Object(n.useCallback)((function(){if(t)return t.black>t.white?"Congratulations! ".concat(c.black.nickname," wins!!"):t.black<t.white?"Congratulations! ".concat(c.white.nickname," wins!!"):"Surprise! This is a draw."}),[c,t]),k=Object(n.useCallback)((function(){m(!0),b(v())}),[v]);return Object(n.useEffect)((function(){o||k()}),[o,k]),r.a.createElement(M,{isOpen:s,headerText:"Results",handleClose:function(){m(!1)}},_)},L=t(28),V=t.n(L),W=function(e){var a=[V.a.square];return e.isMarked&&a.push(V.a.withMark),e.isValidMove&&a.push(V.a.validMove),e.mayBeCaptured&&a.push(V.a.mayBeCaptured),r.a.createElement("div",{className:a.join(" "),onClick:e.clicked,onMouseOver:e.hover,onMouseLeave:e.blur},e.isNotEmpty&&r.a.createElement(b,{color:e.color}))},z=function(e){var a=Object(v.a)({},e);return Object.values(a).forEach((function(e){a[e.key]=Object(v.a)({},e)})),a},J=function(e,a){var t;return!!(null===(t=e[a])||void 0===t?void 0:t.isNotEmpty)},Y=function(e,a){for(var t=[],n=0;n<8;n++)for(var r=0;r<8;r++){var o=Q(r,n);if(!J(e,o)){var c=X(a);F(e,o,c).length>0&&t.push(o)}}return t},F=function(e,a,t){var n=K(e,a,t),r=[];return n.forEach((function(t){for(var n=[],o=t.key-a,c=t;c&&c.color===t.color;)n.push(Object(v.a)({},c)),c=e[c.key+o];c&&(r=[].concat(Object(d.a)(r),n))})),r},K=function(e,a,t){for(var n=[],r=-1;r<=1;r++)for(var o=-1;o<=1;o++){var c=e[a+Q(o,r)];c&&c.key!==a&&c.color===t&&n.push(Object(v.a)({},c))}return n},Q=function(e,a){return 10*e+a},X=function(e){return"black"===e?"white":"black"},Z={},$={33:{key:33,isNotEmpty:!0,color:"white",mayBeCaptured:!1},44:{key:44,isNotEmpty:!0,color:"white",mayBeCaptured:!1},34:{key:34,isNotEmpty:!0,color:"black",mayBeCaptured:!1},43:{key:43,isNotEmpty:!0,color:"black",mayBeCaptured:!1}},ee=[32,23,54,45],ae=function(){var e,a=q(),t=Object(u.a)(a,2),o=t[0],c=o.currentPlayer,i=o.gameStart,l=o.players,s=t[1],f=null===(e=l[c])||void 0===e?void 0:e.isHuman,_=Object(n.useState)($),b=Object(u.a)(_,2),v=b[0],k=b[1],p=Object(n.useState)(ee),E=Object(u.a)(p,2),h=E[0],y=E[1],O=Object(n.useCallback)((function(e,a){return a&&h.includes(e)}),[h]),C=function(e){if(O(e,f)){var a=z(v),t=X(c),n=F(a,e,t);0!==n.length&&(n.forEach((function(e){a[e.key].mayBeCaptured=!0})),k(a))}},w=function(){if(f){var e=Object.values(v).filter((function(e){return!0===e.mayBeCaptured}));if(0!==e.length){var a=z(v);e.forEach((function(e){a[e.key].mayBeCaptured=!1})),k(a)}}},g=Object(n.useCallback)((function(e,a){if(O(e,a)){var t=X(c),n=z(v),r=F(n,e,t);n[e]={key:e,isNotEmpty:!0,color:c},r.forEach((function(e){n[e.key].color=c,n[e.key].mayBeCaptured=!1}));var o=Y(n,t);0===o.length&&0===(o=Y(n,t=c)).length&&(t=null);var i=function(e){var a=Object.values(e),t=a.length,n=a.reduce((function(e,a){return"black"===a.color?e+1:e}),0);return{black:n,white:t-n}}(n);s("TOTAL_SCORE_CHANGED",i),s("PLAYER_CHANGED",t),k(n),y(o)}}),[c,v,s,O]);Object(n.useEffect)((function(){var e;return!1===f&&(e=setTimeout((function(){var e=X(c),a=z(v),t=function(e,a,t){var n=[];e.forEach((function(e){var r=F(a,e,t);n.push({key:e,captured:r.length})}));var r=Math.max.apply(Math,Object(d.a)(n.map((function(e){return e.captured}))));if((n=n.filter((function(e){return e.captured===r}))).length>0){var o=Math.floor(Math.random()*n.length);return n[o].key}return null}(h,a,e);"number"===typeof t&&g(t,!0)}),1e3)),function(){e&&clearTimeout(e)}}),[c,f,v,h,g]),Object(n.useEffect)((function(){i?(k($),y(ee)):(k(Z),y([]))}),[i]);for(var N=[],j=0;j<8;j++)for(var B=function(e){var a=Q(e,j),t=v[a];N.push(r.a.createElement(W,{key:a,isMarked:[2,6].includes(e)&&[2,6].includes(j),isValidMove:O(a,f)?c:null,isNotEmpty:null===t||void 0===t?void 0:t.isNotEmpty,mayBeCaptured:null===t||void 0===t?void 0:t.mayBeCaptured,color:null===t||void 0===t?void 0:t.color,hover:function(){return C(a)},blur:w,clicked:function(){return g(a,f)}}))},S=0;S<8;S++)B(S);return r.a.createElement("div",{className:m.a.boardContainer},r.a.createElement("div",{className:m.a.board,"data-player":c},N))},te=t(44),ne=t.n(te),re=r.a.memo((function(){return r.a.createElement("header",{className:ne.a.header},"Reversi")})),oe=t(94),ce=t(11),ie=t.n(ce),le=function(){var e=q(),a=Object(u.a)(e,2),t=a[0],n=t.players,o=t.currentPlayer,c=t.gameStart,i=t.totalScore,l=a[1],s=function(e){l("GAME_START"),l("INIT_TOTAL_SCORE"),l("PLAYER_CHANGED","black"),l("SET_ROBOTS",e)},m=r.a.createElement(k.a,{in:c,timeout:300,classNames:Object(v.a)({},ie.a),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:ie.a.totalScoreBlock},r.a.createElement("div",{className:ie.a.totalScore},r.a.createElement("div",{className:ie.a.squareBlock},r.a.createElement(W,{isNotEmpty:!0,color:"black"}),null===i||void 0===i?void 0:i.black),r.a.createElement("div",{className:ie.a.squareBlock},r.a.createElement(W,{isNotEmpty:!0,color:"white"}),null===i||void 0===i?void 0:i.white)),r.a.createElement(oe.a,{className:ie.a.button,variant:"outlined",onClick:function(){l("GAME_END")}},"End game"))),d=r.a.createElement(k.a,{in:!c,timeout:300,classNames:Object(v.a)({},ie.a),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:ie.a.actionsBlock},r.a.createElement(oe.a,{className:ie.a.button,variant:"outlined",onClick:function(){return s(1)}},"Single player"),r.a.createElement(oe.a,{className:ie.a.button,variant:"outlined",onClick:function(){return s(0)}},"2 players"),r.a.createElement(oe.a,{className:ie.a.button,variant:"outlined",onClick:function(){return s(2)}},"Battle of robots")));return r.a.createElement("div",{className:ie.a.userPanel},r.a.createElement(h,{show:c,color:"black",active:"black"===o,icon:n.black.icon,nickname:n.black.nickname}),r.a.createElement("div",{className:ie.a.middleBlock},m,d),r.a.createElement(h,{show:c,color:"white",active:"white"===o,icon:n.white.icon,nickname:n.white.nickname}))},ue=function(){return document.body.classList.add("green"),r.a.createElement("div",{className:l.a.app},r.a.createElement(re,null),r.a.createElement(ae,null),r.a.createElement(le,null),r.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=function(e,a){return(a?"":"robot-")+e+"-icon"+(a?".jpg":".png")},me=function(e,a,t){return 1===t?a?"Human":"Robot":a?"Player "+e:"Robot "+e},de=function(){G({PLAYER_CHANGED:function(e,a){return{currentPlayer:a}},SET_ROBOTS:function(e,a){var t=function(e){if(0===e)return[!0,!0];if(1===e){var a=Math.random()>.5?"black":"white";return["black"===a,"white"===a]}if(2===e)return[!1,!1];throw Error("Invalid number of robots!")}(a),n=Object(u.a)(t,2),r=n[0],o=n[1];return{players:{black:{color:"black",icon:se("black",r),isHuman:r,nickname:me(1,r,a)},white:{color:"white",icon:se("white",o),isHuman:o,nickname:me(2,o,a)}}}}},{currentPlayer:"black",players:{black:{color:"black",icon:"black-icon.jpg",isHuman:!0,nickname:"Human"},white:{color:"white",icon:"robot-white-icon.png",isHuman:!1,nickname:"Robot"}}})};(function(){G({GAME_START:function(){return{gameStart:!0}},GAME_END:function(){return{gameStart:!1}},INIT_TOTAL_SCORE:function(){return{totalScore:{black:2,white:2}}},TOTAL_SCORE_CHANGED:function(e,a){return{totalScore:a}}},{gameStart:!1})})(),de(),c.a.render(r.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.751aea7c.chunk.js.map