(this.webpackJsonpreverse=this.webpackJsonpreverse||[]).push([[0],[,function(e,a,t){e.exports={userPanel:"UserPanel_userPanel__HC_aB",playerBlock:"UserPanel_playerBlock__FBiMm",black:"UserPanel_black__3GEvs",white:"UserPanel_white__bVY1N",active:"UserPanel_active__2W2UT",totalScoreBlock:"UserPanel_totalScoreBlock__Roy3U",totalScore:"UserPanel_totalScore__3fmfC",squareBlock:"UserPanel_squareBlock__1QBMJ"}},,function(e,a,t){e.exports={wrapper:"Disk_wrapper__1qe-e",disk:"Disk_disk__ZzxAB",white:"Disk_white__21JwF",black:"Disk_black__kSe-k",front:"Disk_front__2jHMx",back:"Disk_back__1NR7I",side:"Disk_side__1RV_v",spoke:"Disk_spoke__D4k14"}},,function(e,a,t){e.exports={square:"Square_square__1AiCK",withMark:"Square_withMark__3oTPS",validMove:"Square_validMove__2eHfV",mayBeCaptured:"Square_mayBeCaptured__3IWs9"}},,,,,,,function(e,a,t){e.exports={boardContainer:"Board_boardContainer__3ew5_",board:"Board_board__2vvwL",totalScore:"Board_totalScore__2IAP_",black:"Board_black__3K0FP"}},,function(e,a,t){var r={"./black-icon.jpg":24,"./robot-black-icon.png.png":25,"./robot-white-icon.png":26,"./white-icon.jpg":27,"./wood-bg.jpg":28};function n(e){var a=o(e);return t(a)}function o(e){if(!t.o(r,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=o,e.exports=n,n.id=14},,function(e,a,t){e.exports={header:"Header_header__2ONRg"}},function(e,a,t){e.exports=t(29)},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){e.exports=t.p+"static/media/black-icon.ba59a848.jpg"},function(e,a,t){e.exports=t.p+"static/media/robot-black-icon.png.15e05fad.png"},function(e,a,t){e.exports=t.p+"static/media/robot-white-icon.26ab1b8c.png"},function(e,a,t){e.exports=t.p+"static/media/white-icon.ba010b87.jpg"},function(e,a,t){e.exports=t.p+"static/media/wood-bg.ac610868.jpg"},function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(15),c=t.n(o),i=(t(22),t(6)),l=t(7),u=t(9),s=t(8),f=t(10),m=(t(23),t(16)),d=t.n(m),p=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(s.a)(a).apply(this,arguments))}return Object(f.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement("header",{className:d.a.header},"Reversi")}}]),a}(r.Component),v=t(11),k=t(12),b=t.n(k),h=t(5),_=t.n(h),y=t(4),E=t(3),w=t.n(E),j=function(e){var a=[w.a.wrapper,w.a[e.color]];return n.a.createElement("div",{className:a.join(" ")},n.a.createElement("div",{className:w.a.disk},n.a.createElement("div",{className:w.a.front}),n.a.createElement("div",{className:w.a.back}),n.a.createElement("div",{className:w.a.side},Object(y.a)(Array(32)).map((function(e,a){return n.a.createElement("div",{key:a,className:w.a.spoke})})))))},g=function(e){var a=[_.a.square];return e.isMarked&&a.push(_.a.withMark),e.isValidMove&&a.push(_.a.validMove),e.mayBeCaptured&&a.push(_.a.mayBeCaptured),n.a.createElement("div",{className:a.join(" "),onClick:e.clicked,onMouseOver:e.hover,onMouseLeave:e.blur},e.isNotEmpty&&n.a.createElement(j,{color:e.color}))},O=t(2),N=function(e){var a=Object(O.a)({},e);return Object.values(a).forEach((function(e){a[e.key]=Object(O.a)({},e)})),a},B=function(e,a){var t;return!!(null===(t=e[a])||void 0===t?void 0:t.isNotEmpty)},S=function(e,a){for(var t=[],r=0;r<8;r++)for(var n=0;n<8;n++){var o=P(n,r);if(!B(e,o)){var c=x(a);C(e,o,c).length>0&&t.push(o)}}return t},C=function(e,a,t){var r=M(e,a,t),n=[];return r.forEach((function(t){for(var r=[],o=t.key-a,c=t;c&&c.color===t.color;)r.push(Object(O.a)({},c)),c=e[c.key+o];c&&(n=[].concat(Object(y.a)(n),r))})),n},M=function(e,a,t){for(var r=[],n=-1;n<=1;n++)for(var o=-1;o<=1;o++){var c=e[a+P(o,n)];c&&c.key!==a&&c.color===t&&r.push(Object(O.a)({},c))}return r},P=function(e,a){return 10*e+a},x=function(e){return"black"===e?"white":"black"},D={},q=[],U={},A=function(){var e=Object(r.useState)(D)[1];return Object(r.useEffect)((function(){return q.push(e),function(){q=q.filter((function(a){return a!==e}))}}),[e]),[D,function(e,a){var t=U[e](D,a);D=Object(O.a)({},D,{},t);var r=!0,n=!1,o=void 0;try{for(var c,i=q[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){(0,c.value)(D)}}catch(l){n=!0,o=l}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}]},H=function(e){var a,t=A(),o=Object(v.a)(t,2),c=o[0],i=c.currentPlayer,l=c.players,u=o[1],s=null===(a=l[i])||void 0===a?void 0:a.isHuman,f=Object(r.useState)({33:{key:33,isNotEmpty:!0,color:"white",mayBeCaptured:!1},44:{key:44,isNotEmpty:!0,color:"white",mayBeCaptured:!1},34:{key:34,isNotEmpty:!0,color:"black",mayBeCaptured:!1},43:{key:43,isNotEmpty:!0,color:"black",mayBeCaptured:!1}}),m=Object(v.a)(f,2),d=m[0],p=m[1],k=Object(r.useState)([32,23,54,45]),h=Object(v.a)(k,2),_=h[0],E=h[1],w=function(e){if(O(e)){var a=N(d),t=x(i),r=C(a,e,t);r.length&&(r.forEach((function(e){a[e.key].mayBeCaptured=!0})),p(a))}},j=function(){if(s){var e=N(d);Object.values(e).forEach((function(e){e.mayBeCaptured=!1})),p(e)}},O=function(e){return s&&_.includes(e)},B=Object(r.useCallback)((function(a,t){if(t&&_.includes(a)){var r=x(i),n=N(d),o=C(n,a,r);n[a]={key:a,isNotEmpty:!0,color:i},o.forEach((function(e){n[e.key].color=i,n[e.key].mayBeCaptured=!1}));var c=S(n,r);c.length||(c=S(n,r=i)).length||(r=null);var l=function(e){var a=Object.values(e),t=a.length,r=a.reduce((function(e,a){return"black"===a.color?e+1:e}),0);return{black:r,white:t-r}}(n);e.setTotalScore(l),u("PLAYER_CHANGED",r),p(n),E(c)}}),[i,e,_,d,u]);Object(r.useEffect)((function(){var e;if(!1===s){var a=x(i),t=N(d),r=function(e,a,t){var r=[];e.forEach((function(e){var n=C(a,e,t);r.push({key:e,captured:n.length})}));var n=Math.max.apply(Math,Object(y.a)(r.map((function(e){return e.captured}))));if((r=r.filter((function(e){return e.captured===n}))).length){var o=Math.floor(Math.random()*r.length);return r[o].key}return null}(_,t,a);if("number"!==typeof r)return;e=setTimeout((function(){B(r,!0)}),1e3)}return function(){e&&clearTimeout(e)}}),[i,s,d,_,B]);for(var M=[],D=0;D<8;D++)for(var q=function(e){var a=P(e,D),t=d[a];M.push(n.a.createElement(g,{isMarked:[2,6].includes(e)&&[2,6].includes(D),key:a,isValidMove:O(a)?i:null,isNotEmpty:null===t||void 0===t?void 0:t.isNotEmpty,mayBeCaptured:null===t||void 0===t?void 0:t.mayBeCaptured,color:null===t||void 0===t?void 0:t.color,hover:function(){return w(a)},blur:j,clicked:function(){return B(a,s)}}))},U=0;U<8;U++)q(U);return n.a.createElement("div",{className:b.a.boardContainer},n.a.createElement("div",{className:b.a.board,"data-player":i},M))},R=t(1),T=t.n(R),F=function(e){var a=A()[0],r=a.players,o=a.currentPlayer;return n.a.createElement("div",{className:T.a.userPanel},n.a.createElement("figure",{className:[T.a.playerBlock,T.a.black,"black"===o?T.a.active:""].join(" ")},n.a.createElement("img",{src:t(14)("./".concat(r.black.icon)),alt:"black"}),n.a.createElement("figcaption",null,r.black.nickname)),n.a.createElement("div",{className:T.a.totalScoreBlock},n.a.createElement("div",{className:T.a.totalScore},n.a.createElement("div",{className:T.a.squareBlock},n.a.createElement(g,{isNotEmpty:!0,color:"black"}),e.totalScore.black),n.a.createElement("div",{className:T.a.squareBlock},n.a.createElement(g,{isNotEmpty:!0,color:"white"}),e.totalScore.white))),n.a.createElement("figure",{className:[T.a.playerBlock,T.a.white,"white"===o?T.a.active:""].join(" ")},n.a.createElement("img",{src:t(14)("./".concat(r.white.icon)),alt:"white"}),n.a.createElement("figcaption",null,r.white.nickname)))},I=["green"],L=function(e){function a(){var e,t;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(n)))).state={totalScore:{black:2,white:2}},t.getRandomItemFromArray=function(e){return e[Math.floor(Math.random()*e.length)]},t.setTotalScore=function(e){t.setState({totalScore:e})},t}return Object(f.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return document.body.classList.add(this.getRandomItemFromArray(I)),n.a.createElement("div",{className:"app"},n.a.createElement(p,null),n.a.createElement(H,{setTotalScore:this.setTotalScore}),n.a.createElement(F,{totalScore:this.state.totalScore}))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));(function(){var e,a;e={PLAYER_CHANGED:function(e,a){return{currentPlayer:a}}},(a={currentPlayer:"black",players:{black:{color:"black",icon:"black-icon.jpg",isHuman:!0,nickname:"Human"},white:{color:"white",icon:"robot-white-icon.png",isHuman:!1,nickname:"Robot"}}})&&(D=Object(O.a)({},D,{},a),U=Object(O.a)({},U,{},e))})(),c.a.render(n.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[17,1,2]]]);
//# sourceMappingURL=main.b1f3fc81.chunk.js.map